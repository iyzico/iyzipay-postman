{
	"info": {
		"name": "iyzipay",
		"_postman_id": "c469c337-cc40-8490-dfba-39cdccae2508",
		"description": "iyzico API has been developed to support merchants with extended online payment services and can be easily integrated into existing platforms. All services are based on a stateless RESTful service architecture that requires API clients to access these services (e.g. for data marshalling / unmarshalling and PKI (public key infrastructure) encryption / decryption).\n\nSANDBOX  : sandbox-merchant.iyzipay.com\nGITHUB   : github.com/iyzico/iyzipay-postman\nDEV PAGE : dev.iyzipay.com/en",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "BKM",
			"description": "BKM Express",
			"item": [
				{
					"name": "Initialize Bkm",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = initializeBkm;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"callbackUrl\": \"https://www.merchant.com/callback\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/bkm/initialize",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"bkm",
								"initialize"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/bkm/initialize"
					},
					"response": []
				},
				{
					"name": "Retrieve Bkm Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = bkm;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"token\": \"d9a1d90e-7cfb-4ead-a6ec-34237bac04f0\"\n}\n"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/bkm/auth/detail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"bkm",
								"auth",
								"detail"
							]
						},
						"description": "https://sandbox-api.iyzipay.com//\npayment/bkm/auth/detail"
					},
					"response": []
				}
			]
		},
		{
			"name": "Card Register",
			"item": [
				{
					"name": "Create User And Add Card",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = card;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"externalId\": \"external id\",\n    \"email\": \"email@email.com\",\n    \"card\": {\n        \"cardAlias\": \"card alias\",\n        \"cardNumber\": \"5528790000000008\",\n        \"expireYear\": \"2030\",\n        \"expireMonth\": \"12\",\n        \"cardHolderName\": \"John Doe\"\n    }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cardstorage/card",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"cardstorage",
								"card"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/cardstorage/card"
					},
					"response": []
				},
				{
					"name": "Create Card",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = card;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"cardUserKey\": \"W2OM/ZUXAn0qCepxpa5Taz89lV0=\",\n    \"card\": {\n        \"cardAlias\": \"card alias\",\n        \"cardNumber\": \"5528790000000008\",\n        \"expireYear\": \"2030\",\n        \"expireMonth\": \"12\",\n        \"cardHolderName\": \"John Doe\"\n    }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cardstorage/card",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"cardstorage",
								"card"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/cardstorage/card"
					},
					"response": []
				},
				{
					"name": "Delete Card",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = card;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"cardUserKey\": \"W2OM/ZUXAn0qCepxpa5Taz89lV0=\",\n    \"cardToken\": \"DAx+xnNEwm/4scO+ih7rOsM+4jo=\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cardstorage/card",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"cardstorage",
								"card"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/cardstorage/card"
					},
					"response": []
				},
				{
					"name": "Retrieve Cards",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = card;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"cardUserKey\": \"W2OM/ZUXAn0qCepxpa5Taz89lV0=\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cardstorage/cards",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"cardstorage",
								"cards"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/cardstorage/card"
					},
					"response": []
				},
				{
					"name": "Create Payment with Registered card",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payment;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"paidPrice\": \"1.1\",\n    \"installment\": 1,\n    \"paymentChannel\": \"WEB\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"paymentCard\": {\n        \"cardUserKey\": \"card user key\",\n        \"cardToken\": \"card token\"\n    },\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"currency\": \"TRY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"auth"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/auth"
					},
					"response": []
				}
			]
		},
		{
			"name": "Marketplace",
			"description": "Dev Page: https://dev.iyzipay.com/en/marketplace\n\n",
			"item": [
				{
					"name": "Approve Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = approval;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"paymentTransactionId\": \"1\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/item/approve",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"item",
								"approve"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/iyzipos/item/approve"
					},
					"response": []
				},
				{
					"name": "Disapprove Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = approval;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"paymentTransactionId\": \"1\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/item/disapprove",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"item",
								"disapprove"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/iyzipos/item/disapprove"
					},
					"response": []
				},
				{
					"name": "Create Marketplace Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payment;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"paidPrice\": \"1.1\",\n    \"installment\": 1,\n    \"paymentChannel\": \"WEB\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"paymentCard\": {\n        \"cardHolderName\": \"John Doe\",\n        \"cardNumber\": \"5528790000000008\",\n        \"expireYear\": \"2030\",\n        \"expireMonth\": \"12\",\n        \"cvc\": \"123\",\n        \"registerCard\": 0\n    },\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.2\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.3\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.1\"\n        }\n    ],\n    \"currency\": \"TRY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"auth"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/auth"
					},
					"response": []
				},
				{
					"name": "Initialize Marketplace Checkout",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = initializeCheckout;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.1\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.1\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"name\": \"Usb\",\n            \"price\": \"0.2\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\",\n            \"subMerchantKey\":\"DuZbKGwz5pr+uBPlMdG1h5Q3E8=\",\n            \"subMerchantPrice\":\"0.1\"\n        }\n    ],\n    \"enabledInstallments\": [\n        1,\n        2,\n        3,\n        6,\n        9\n    ],\n    \"callbackUrl\": \"https://www.merchant.com/callback\",\n    \"currency\": \"TRY\",\n    \"paidPrice\": \"1.2\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/checkoutform/initialize/auth/ecom",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"checkoutform",
								"initialize",
								"auth",
								"ecom"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/iyzipos/checkoutform/initialize/auth/ecom"
					},
					"response": []
				},
				{
					"name": "Create Personal Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"John's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n    \"iban\": \"TR180006200119000006672315\",\n    \"contactName\": \"John\",\n    \"contactSurname\": \"Doe\",\n    \"currency\": \"TRY\",\n    \"subMerchantExternalId\": \"B49224\",\n    \"identityNumber\": \"1234567890\",\n    \"subMerchantType\": \"PERSONAL\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				},
				{
					"name": "Create Private Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"John's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n    \"iban\": \"TR180006200119000006672315\",\n    \"taxOffice\": \"Tax office\",\n    \"legalCompanyTitle\": \"John Doe inc\",\n    \"currency\": \"TRY\",\n    \"subMerchantExternalId\": \"S49222\",\n    \"identityNumber\": \"31300864726\",\n    \"subMerchantType\": \"PRIVATE_COMPANY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				},
				{
					"name": "Create Company Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"John's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n    \"iban\": \"TR180006200119000006672315\",\n    \"taxOffice\": \"Tax office\",\n    \"legalCompanyTitle\": \"XYZ inc\",\n    \"currency\": \"TRY\",\n    \"subMerchantExternalId\": \"AS49224\",\n    \"taxNumber\": \"9261877\",\n    \"subMerchantType\": \"LIMITED_OR_JOINT_STOCK_COMPANY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				},
				{
					"name": "Retrieve Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"subMerchantExternalId\": \"S49222\"\n}\n"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant/detail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant",
								"detail"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant/detail"
					},
					"response": []
				},
				{
					"name": "Update Personal Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"Jane's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1 \",\n    \"iban\": \"TR630006200027700006678204\",\n    \"contactName\": \"Jane\",\n    \"contactSurname\": \"Doe\",\n    \"currency\": \"TRY\",\n    \"subMerchantKey\": \"ISJcSPg1T2TRCA3e8ErmQK/xntY=\",\n    \"identityNumber\": \"31300864726\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				},
				{
					"name": "Update Private Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"Jane's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n    \"iban\": \"TR180006200119000006672315\",\n    \"taxOffice\": \"Tax office\",\n    \"legalCompanyTitle\": \"Jane Doe inc\",\n    \"currency\": \"TRY\",\n    \"subMerchantKey\": \"PPFFZPedVQSvaOqZu5xpvpLEqmc=\",\n    \"identityNumber\": \"31300864726\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				},
				{
					"name": "Update Company Submerchant",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = subMerchant;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"name\": \"Jane's market\",\n    \"email\": \"email@submerchantemail.com\",\n    \"gsmNumber\": \"+905350000000\",\n    \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n    \"iban\": \"TR180006200119000006672315\",\n    \"taxOffice\": \"Tax office\",\n    \"legalCompanyTitle\": \"ABC inc\",\n    \"currency\": \"TRY\",\n    \"subMerchantKey\": \"jsLbNEUu8XOKyxLdqqqqHUuu9bQ=\",\n    \"taxNumber\": \"9261877\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/onboarding/submerchant",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"onboarding",
								"submerchant"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/onboarding/submerchant"
					},
					"response": []
				}
			]
		},
		{
			"name": "Pecco",
			"item": [
				{
					"name": "Initialize Pecco",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = initializeBkm;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"callbackUrl\": \"https://www.merchant.com/callback\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/bkm/initialize",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"bkm",
								"initialize"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/pecco/initialize"
					},
					"response": []
				},
				{
					"name": "Create Pecco",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = bkm;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"token\": \"d9a1d90e-7cfb-4ead-a6ec-34237bac04f0\"\n}\n"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/bkm/auth/detail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"bkm",
								"auth",
								"detail"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/pecco/auth"
					},
					"response": []
				}
			]
		},
		{
			"name": "Checkout Form",
			"description": "Dev Page: https://dev.iyzipay.com/en/checkout-form",
			"item": [
				{
					"name": "Initialize Checkout",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = initializeCheckout;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"name\": \"Usb\",\n            \"price\": \"0.2\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"enabledInstallments\": [\n        1,\n        2,\n        3,\n        6,\n        9\n    ],\n    \"callbackUrl\": \"https://www.merchant.com/callback\",\n    \"currency\": \"TRY\",\n    \"paidPrice\": \"1.2\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/checkoutform/initialize/auth/ecom",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"checkoutform",
								"initialize",
								"auth",
								"ecom"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/checkout-form/initialize"
					},
					"response": []
				},
				{
					"name": "Retrieve Checkout Form Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"var requestModel = checkoutForm;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"token\": \"d9a1d90e-7cfb-4ead-a6ec-34237bac04f0\"\n}\n"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/checkoutform/auth/ecom/detail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"checkoutform",
								"auth",
								"ecom",
								"detail"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/checkout-form/retrieve"
					},
					"response": []
				},
				{
					"name": "Initialize Checkout with Card User Key",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = initializeCheckout;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"cardUserKey\": \"card user key\",\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"name\": \"Usb\",\n            \"price\": \"0.2\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"enabledInstallments\": [\n        1,\n        2,\n        3,\n        6,\n        9\n    ],\n    \"callbackUrl\": \"https://www.merchant.com/callback\",\n    \"currency\": \"TRY\",\n    \"paidPrice\": \"1.2\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/checkoutform/initialize/auth/ecom",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"checkoutform",
								"initialize",
								"auth",
								"ecom"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/payment/iyzipos/checkoutform/initialize/auth/ecom"
					},
					"response": []
				}
			]
		},
		{
			"name": "Payment",
			"description": "",
			"item": [
				{
					"name": "Create Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payment;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"paidPrice\": \"1.1\",\n    \"installment\": 1,\n    \"paymentChannel\": \"WEB\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"paymentCard\": {\n        \"cardHolderName\": \"John Doe\",\n        \"cardNumber\": \"5528790000000008\",\n        \"expireYear\": \"2030\",\n        \"expireMonth\": \"12\",\n        \"cvc\": \"123\",\n        \"registerCard\": 0\n    },\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"currency\": \"TRY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"auth"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/auth"
					},
					"response": []
				},
				{
					"name": "Create Threeds Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = createThreeds;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"paymentId\": \"1\",\n  \"conversationData\":\"\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/3dsecure/auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"3dsecure",
								"auth"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/auth-with-3d"
					},
					"response": []
				},
				{
					"name": "Initialize Threeds Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payment;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"locale\": \"tr\",\n    \"conversationId\": \"123456789\",\n    \"price\": \"1.0\",\n    \"paidPrice\": \"1.2\",\n    \"installment\": 1,\n    \"paymentChannel\": \"WEB\",\n    \"basketId\": \"B67832\",\n    \"paymentGroup\": \"PRODUCT\",\n    \"paymentCard\": {\n        \"cardHolderName\": \"John Doe\",\n        \"cardNumber\": \"5528790000000008\",\n        \"expireYear\": \"2030\",\n        \"expireMonth\": \"12\",\n        \"cvc\": \"123\"\n    },\n    \"buyer\": {\n        \"id\": \"BY789\",\n        \"name\": \"John\",\n        \"surname\": \"Doe\",\n        \"identityNumber\": \"74300864791\",\n        \"email\": \"email@email.com\",\n        \"gsmNumber\": \"+905350000000\",\n        \"registrationDate\": \"2013-04-21 15:12:09\",\n        \"lastLoginDate\": \"2015-10-05 12:43:35\",\n        \"registrationAddress\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\",\n        \"zipCode\": \"34732\",\n        \"ip\": \"85.34.78.112\"\n    },\n    \"shippingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"billingAddress\": {\n        \"address\": \"Nidakule Göztepe, Merdivenköy Mah. Bora Sok. No:1\",\n        \"zipCode\": \"34742\",\n        \"contactName\": \"Jane Doe\",\n        \"city\": \"Istanbul\",\n        \"country\": \"Turkey\"\n    },\n    \"basketItems\": [\n        {\n            \"id\": \"BI101\",\n            \"price\": \"0.3\",\n            \"name\": \"Binocular\",\n            \"category1\": \"Collectibles\",\n            \"category2\": \"Accessories\",\n            \"itemType\": \"PHYSICAL\"\n        },\n        {\n            \"id\": \"BI102\",\n            \"price\": \"0.5\",\n            \"name\": \"Game code\",\n            \"category1\": \"Game\",\n            \"category2\": \"Online Game Items\",\n            \"itemType\": \"VIRTUAL\"\n        },\n        {\n            \"id\": \"BI103\",\n            \"price\": \"0.2\",\n            \"name\": \"Usb\",\n            \"category1\": \"Electronics\",\n            \"category2\": \"Usb / Cable\",\n            \"itemType\": \"PHYSICAL\"\n        }\n    ],\n    \"currency\": \"TRY\",\n    \"callbackUrl\": \"https://www.merchant.com/callback\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/3dsecure/initialize",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"3dsecure",
								"initialize"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/auth-with-3d"
					},
					"response": []
				},
				{
					"name": "Cancel",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = cancel;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"paymentId\":\"1\",\n  \"ip\":\"85.34.78.112\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"cancel"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/cancel"
					},
					"response": []
				},
				{
					"name": "Refund",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = refund;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"paymentTransactionId\":\"1\",\n  \"price\":\"1.0\",\n  \"currency\":\"TRY\",\n  \"ip\":\"85.34.78.112\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/refund",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"refund"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/refund"
					},
					"response": []
				},
				{
					"name": "Retrieve Payment Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = paymentResult;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"paymentId\": \"1\",\n  \"paymentConversationId\":\"123456789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/detail",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"detail"
							]
						}
					},
					"response": []
				},
				{
					"name": "Retrieve Installment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = installment;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"price\":\"100.0\",\n  \"binNumber\":\"542119\",\n  \"conversationId\": \"123456789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/iyzipos/installment",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"iyzipos",
								"installment"
							]
						},
						"description": "Dev Page : https://dev.iyzipay.com/en/api/installment-service"
					},
					"response": []
				},
				{
					"name": "Retrieve Bin",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = binNumber;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"binNumber\":\"542119\",\n  \"conversationId\": \"123456789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/payment/bin/check",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"payment",
								"bin",
								"check"
							]
						},
						"description": "https://sandbox-api.iyzipay.com//payment/bin/check"
					},
					"response": []
				}
			]
		},
		{
			"name": "Settlement",
			"description": "",
			"item": [
				{
					"name": "Retrieve Bounced Bank Transfer List",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payout;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"date\": \"2016-01-22 19:13:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/reporting/settlement/payoutcompleted",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reporting",
								"settlement",
								"payoutcompleted"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/reporting/settlement/bounced"
					},
					"response": []
				},
				{
					"name": "Retrieve Payout Completed Transfer List",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"response status \" + jsonData.status ] = jsonData.status === \"success\"",
									"",
									"tests[\"pki string: \" + globals.pkiString ] = true",
									"tests[\"authorization: \" + globals.authorization ] = true",
									"tests[\"json: \" + request.data ] = true"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var apiKey = postman.getEnvironmentVariable(\"apiKey\");",
									"var secretKey = postman.getEnvironmentVariable(\"secretKey\");",
									"",
									"var approval = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null",
									"};",
									"",
									"var subMerchant = {",
									"    locale: null,",
									"    conversationId: null,",
									"    name: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    address: null,",
									"    iban: null,",
									"    taxOffice: null,",
									"    contactName: null,",
									"    contactSurname: null,",
									"    legalCompanyTitle: null,",
									"    swiftCode: null,",
									"    currency: null,",
									"    subMerchantKey: null,",
									"    subMerchantExternalId: null,",
									"    identityNumber: null,",
									"    taxNumber: null,",
									"    subMerchantType: null,",
									"    ",
									"};",
									"",
									"var binNumber = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var cancel = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentId: null,",
									"    ip: null",
									"};",
									"",
									"var refund = {",
									"    locale: null,",
									"    conversationId: null,",
									"    paymentTransactionId: null,",
									"    price: null,",
									"    ip: null,",
									"    currency: null",
									"};",
									"",
									"var installment = {",
									"    locale:null,",
									"    conversationId:null,",
									"    binNumber:null,",
									"};",
									"",
									"var paymentResult = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    paymentConversationId:null",
									"};",
									"",
									"var createThreeds = {",
									"    locale:null,",
									"    conversationId:null,",
									"    paymentId: null,",
									"    ConversationData:null",
									"};",
									"",
									"var paymentCard = {",
									"    cardHolderName: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"    cvc: null,",
									"    registerCard: null,",
									"    cardAlias: null,",
									"    cardToken: null,",
									"    cardUserKey: null",
									"};",
									"",
									"var cardInformation = {",
									"    cardAlias: null,",
									"    cardNumber: null,",
									"    expireYear: null,",
									"    expireMonth: null,",
									"};",
									"",
									"var buyer = {",
									"    id: null,",
									"    name: null,",
									"    surname: null,",
									"    identityNumber: null,",
									"    email: null,",
									"    gsmNumber: null,",
									"    registrationDate: null,",
									"    lastLoginDate: null,",
									"    registrationAddress: null,",
									"    city: null,",
									"    country: null,",
									"    zipCode: null,",
									"    ip: null",
									"};",
									"",
									"var shippingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var billingAddress = {",
									"    address: null,",
									"    zipCode: null,",
									"    contactName: null,",
									"    city: null,",
									"    country: null",
									"};",
									"",
									"var basketItem = {",
									"    id: null,",
									"    price: null,",
									"    name: null,",
									"    category1: null,",
									"    category2: null,",
									"    itemType: null,",
									"    subMerchantKey:null,",
									"    subMerchantPrice: null",
									"};",
									"",
									"function BasketItem() {",
									"    this.id= null;",
									"    this.price= null;",
									"    this.name=null;",
									"    this.category1= null;",
									"    this.category2= null;",
									"    this.itemType=null,",
									"    this.subMerchantKey=null;",
									"    this.subMerchantPrice= null;",
									"}",
									"",
									"var basketItems = [];",
									"var enabledInstallments = [];",
									"",
									"var payment = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    paidPrice: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    currency: null,",
									"    ",
									"};",
									"",
									"var initializeBkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    enabledInstallments:enabledInstallments",
									"    ",
									"};",
									"",
									"var initializeCheckout = {",
									"    locale: null,",
									"    conversationId: null,",
									"    price: null,",
									"    installment: null,",
									"    paymentChannel: null,",
									"    basketId: null,",
									"    paymentGroup: null,",
									"    paymentCard: paymentCard,",
									"    buyer: buyer,",
									"    shippingAddress: shippingAddress,",
									"    billingAddress: billingAddress,",
									"    basketItems: basketItems,",
									"    callbackUrl:null,",
									"    paymentSource:null,",
									"    currency: null,",
									"    paidPrice: null,",
									"    forceThreeDS:null,",
									"    cardUserKey: null,",
									"    enabledInstallments:enabledInstallments",
									"};",
									"",
									"var checkoutForm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var bkm = {",
									"    locale: null,",
									"    conversationId: null,",
									"    token: null,",
									"};",
									"",
									"var card = {",
									"    locale:null,",
									"    conversationId:null,",
									"    externalId: null,",
									"    email: null,",
									"    cardUserKey: null,",
									"    card: cardInformation",
									"};",
									"",
									"function nullClear(obj){",
									"    for (var member in obj) {",
									"        ",
									"        if(obj[member] === null) {    ",
									"            delete obj[member];",
									"        }",
									"        else if (typeof obj[member] === 'object'){",
									"            obj[member]=nullClear(obj[member]);",
									"            if(Object.keys(obj[member]).length===0){",
									"                delete obj[member];",
									"            }",
									"        }",
									"    }",
									"    ",
									"    return obj;",
									"}",
									"",
									"//Set json string to model",
									"function jsonToObj(jsonString, obj) {",
									"    var parsedJsonString = JSON.parse(jsonString);",
									"    for(var key in parsedJsonString) {",
									"        if(parsedJsonString.hasOwnProperty(key)) {",
									"            if (typeof parsedJsonString[key] === 'object') {",
									"                if(Array.isArray(parsedJsonString[key])){",
									"                    for(var i = 0; i < parsedJsonString[key].length; i++){",
									"                        if(key ==\"basketItems\"){",
									"                            obj[key].push(new BasketItem());",
									"                            obj[key][i]=jsonToObj(JSON.stringify(parsedJsonString[key][i]), obj[key][i]);",
									"                        }else {",
									"                            obj[key][i] = parsedJsonString[key][i];",
									"                        }",
									"                    }",
									"                }else{",
									"               obj[key] = jsonToObj(JSON.stringify(parsedJsonString[key]), obj[key]);",
									"                }",
									"            }else{",
									"                obj[key] = parsedJsonString[key];",
									"            }",
									"            ",
									"        }",
									"    }",
									"    obj = nullClear(obj);",
									"    ",
									"    return obj;",
									"}",
									"",
									"//generate pki string of object",
									"function generateRequestString(obj) {",
									"    var isArray = Array.isArray(obj);",
									"    ",
									"    var requestString = '[';",
									"    for (var i in obj) {",
									"        var val = obj[i];",
									"        if (!isArray) {",
									"            requestString += i + '=';",
									"        }",
									"        if (typeof val === 'object') {",
									"            requestString += generateRequestString(val);",
									"        } else {",
									"            requestString += val;",
									"        }",
									"        requestString += isArray ? ', ' : ',';",
									"    }",
									"    requestString = requestString.slice(0, (isArray ? -2 : -1));",
									"    requestString += ']';",
									"    return requestString;",
									"    ",
									"}    ",
									"",
									"//generate authorization string",
									"function generateAuthorizationString(obj) {",
									"    var requestString = generateRequestString(obj);",
									"    var hashSha1 =  CryptoJS.SHA1(apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    var hashInBase64 = CryptoJS.enc.Base64.stringify(hashSha1);",
									"    var authorization = \"IYZWS\"+\" \"+apiKey+\":\"+hashInBase64;",
									"    console.log(requestString);",
									"    postman.setGlobalVariable(\"pkiString\", apiKey+request.headers[\"x-iyzi-rnd\"]+secretKey+requestString);",
									"    return authorization;",
									"}",
									"",
									"var requestModel = payout;",
									"requestModel = jsonToObj(request.data, requestModel);",
									"var authorization = generateAuthorizationString(requestModel);",
									"postman.setGlobalVariable(\"authorization\", authorization);",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{authorization}}"
							},
							{
								"key": "x-iyzi-rnd",
								"value": "123456789"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"locale\": \"tr\",\n  \"conversationId\": \"123456789\",\n  \"date\": \"2016-01-22 19:13:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/reporting/settlement/payoutcompleted",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reporting",
								"settlement",
								"payoutcompleted"
							]
						},
						"description": "https://sandbox-api.iyzipay.com/reporting/settlement/payoutcompleted"
					},
					"response": []
				}
			]
		},
		{
			"name": "Heath Check",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							""
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{baseUrl}}/payment/test",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"payment",
						"test"
					]
				},
				"description": "https://sandbox-api.iyzipay.com/payment/test"
			},
			"response": []
		}
	]
}